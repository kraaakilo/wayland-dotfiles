# ============================================================
# GLOBAL WINDOW RULES
# ============================================================

# Ignore maximize requests from apps
windowrule {
  name = suppress-maximize
  match:class = .*
  suppress_event = maximize
}

# Fix dragging issues with xwayland (empty titleless xwayland windows)
windowrule {
  name = xwayland-drag-fix
  match:class = ^$
  match:title = ^$
  match:xwayland = 1
  match:float = 1
  match:fullscreen = 0
  match:pin = 0
  no_focus = on
}


# ============================================================
# OPACITY RULES
# ============================================================

# Browser - fully opaque (override any global opacity)
windowrule {
  name = brave-opacity
  match:class = ^(?i)brave-browser$
  opacity = 1.0 override
}

# Terminals - slightly transparent
windowrule {
  name = kitty-opacity
  match:class = ^(kitty)$
  opacity = 0.9
}

windowrule {
  name = ghostty-opacity
  match:class = ^(com\.mitchellh\.ghostty)$
  opacity = 0.9
}


# ============================================================
# FLOATING WINDOWS WITH SIZING
# ============================================================

# CopyQ clipboard manager
windowrule {
  name = copyq-float
  match:class = ^(com\.github\.hluk\.copyq)$
  float = on
  size = 800 600
  center = on
}

# Blueman Bluetooth manager
windowrule {
  name = blueman-float
  match:class = ^(blueman-manager)$
  float = on
  size = 800 600
  center = on
}

# GTK appearance settings
windowrule {
  name = nwg-look-float
  match:class = ^(nwg-look)$
  float = on
  size = 800 600
}

# PulseAudio volume control
windowrule {
  name = pavucontrol-float
  match:class = ^(org\.pulseaudio\.pavucontrol)$
  float = on
}

# GNOME Disks
windowrule {
  name = disks-float
  match:class = ^(org\.gnome\.DiskUtility)$
  float = on
}

# GNOME Seahorse (passwords & keys)
windowrule {
  name = seahorse-float
  match:class = ^(org\.gnome\.seahorse\.Application)$
  float = on
  size = 800 600
}

# Calculator
windowrule {
  name = calculator-float
  match:class = ^(galculator)$
  float = on
}

# XDG desktop portal GTK
windowrule {
  name = xdg-portal-float
  match:class = ^(xdg-desktop-portal-gtk)$
  float = on
  size = 800 600
}

# Thunar file operation progress
windowrule {
  name = thunar-progress-float
  match:class = ^(thunar)$
  match:title = ^(File Operation Progress)$
  float = on
}


# ============================================================
# WORKSPACE ASSIGNMENTS
# ============================================================

# Workspace 1: Terminal
windowrule {
  name = ws1-terminal
  match:class = ^(kitty)$
  workspace = 1
}

# Workspace 2: Development
windowrule {
  name = ws2-vscode
  match:class = ^(Code)$
  workspace = 2
}

windowrule {
  name = ws2-jetbrains
  match:class = ^(jetbrains-.*)$
  workspace = 2
}

windowrule {
  name = ws2-thunar
  match:class = ^(thunar)$
  workspace = 2
}

# Workspace 3: Browser
windowrule {
  name = ws3-brave
  match:class = ^(?i)brave-browser$
  workspace = 3
}

# Workspace 4: Communication
windowrule {
  name = ws4-communication
  match:class = ^(?i).*(telegram|slack|thunderbird|discord|signal).*$
  workspace = 4
}

windowrule {
  name = ws4-whatsapp
  match:class = ^(brave-hnpfjngllnobngcgfapefoaidbinmjnm-Default)$
  workspace = 4
}

# Workspace 5: Notes & Documentation
windowrule {
  name = ws5-notion
  match:class = ^(Notion)$
  workspace = 5
}

windowrule {
  name = ws5-obsidian
  match:class = ^(obsidian)$
  workspace = 5
}

# Workspace 6: Media
windowrule {
  name = ws6-spotify
  match:class = ^(Spotify)$
  workspace = 6
}

windowrule {
  name = ws6-rhythmbox
  match:class = ^(rhythmbox)$
  workspace = 6
}

windowrule {
  name = ws6-netflix
  match:class = ^(Netflix)$
  workspace = 6
}

windowrule {
  name = ws6-vlc
  match:class = ^(vlc)$
  workspace = 6
}

windowrule {
  name = ws6-mpv
  match:class = ^(mpv)$
  workspace = 6
}

# Workspace 7: Virtualization
windowrule {
  name = ws7-virtualbox
  match:class = ^(?i)VirtualBox$
  workspace = 7
}

# Workspace 8: Streaming/Recording
windowrule {
  name = ws8-obs
  match:class = ^(com\.obsproject\.Studio)$
  workspace = 8
}

# Workspace 10: Design & Networking
windowrule {
  name = ws10-drawio
  match:class = ^(draw\.io)$
  workspace = 10
}

windowrule {
  name = ws10-packettracer
  match:class = ^(PacketTracer)$
  workspace = 10
}

# Workspace 11: Chrome
windowrule {
  name = ws11-chrome
  match:class = ^(?i)chrome$
  workspace = 11
}
